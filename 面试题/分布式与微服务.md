# 分布式与微服务

## 概念

集群是个物理形态，分布式是个工作方式。

1. 集群：同一个业务，部署在多个服务器上，将几台服务器集中在一起，实现同一业务。
2. 分布式：一个业务分拆多个子业务，部署在不同的服务器上，分布式是指将不同的业务分布在不同的地方。
3. 微服务: 和分布式比较相似，微服务是一种架构风格，一个大型复杂软件应用由一个或多个微服务组成。系统中的各个微服务可被独立部署，各个微服务之间是松耦合的。每个微服务仅关注于完成一件任务并很好地完成该任务。在所有情况下，每个任务代表着一个小的业务能力。

## 总结

**1. 分布式中的每一个节点，都可以做集群。而集群并不一定就是分布式的。**
  举例：就比如新浪网，访问的人多了，他可以做一个群集，前面放一个响应服务器，后面几台服务器完成同一业务，如果有业务访问的时候，响应服务器看哪台服务器的负载不是很重，就将给哪一台去完成。而分布式，从窄意上理解，也跟集群差不多，但是它的组织比较松散，不像集群，有一个组织性，一台服务器垮了，其它的服务器可以顶上来。分布式的每一个节点，都完成不同的业务，一个节点垮了，那这个业务就不可访问了。


**2. 简单说，分布式是以缩短单个任务的执行时间来提升效率，而集群则是通过提高单位时间内执行的任务数来提升效率。**

  例如：如果一个任务由 10 个子任务组成，每个子任务单独执行需 1 小时，则在一台服务器上执行该任务需 10 小时。采用分布式方案，提供 10 台服务器，每台服务器只负责处理一个子任务，不考虑子任务间的依赖关系，执行完这个任务只需一个小时。(这种工作模式的一个典型代表就是 Hadoop 的 Map/Reduce 分布式计算模型）。而采用集群方案，同样提供 10 台服务器，每台服务器都能独立处理这个任务。假设有 10 个任务同时到达，10 个服务器将同时工作，1 小时后，10 个任务同时完成，这样，整身来看，还是 1 小时内完成一个任务！
  好的设计应该是分布式和集群的结合，先分布式再集群，具体实现就是业务拆分成很多子业务，然后针对每个子业务进行集群部署，这样每个子业务如果出了问题，整个系统完全不会受影响。



## 微服务特点

1.小组之间可以独立开发并快速部署
2.各服务之间松耦合性，互不影响，便于修改和后期维护。降低开发成本
3.由于微服务是分布式的，一个服务挂掉，其他服务不会受影响。具有高可用的特性。


通用的组件服务

1.统一配置中心
	1.1 统一管理不同环境、不同机器或不同服务的配置
	1.2 版本发布管理
	1.3 操作审计
	
2.统一网关服务
	2.1 统一接入
	2.2 安全防护（防止恶意的请求或网络攻击）
	2.3 流量管控

3.统一认证中心
	3.1 用户认证
	3.2 授权
	3.3 单点登录（SSO）

4.统一监控服务
	包括资源监控、网络管理、数据采集、统计报表、事件告警等功能
	
5.注册中心服务
	服务注册、服务发现、容灾与高可用
	
6.文件服务
	6.1 文件上传
	6.2 文件下载
	6.3 统一加密
	6.4 搜索管理

7.消息服务
	消息管理（消息接收、消息发送、消息恢复、重发）

8.日志服务
	日志采集、筛选、缓冲、搜索
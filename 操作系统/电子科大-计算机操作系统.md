# Computer Operating System

计算机操作系统前言：

- About this Module 
  - 先修课程：计算机组成原理、高级语言程序设计、数据结构
  - Key words：principles、algorithms、datastructures、technical terms 

* Learning Objectives 
  - 掌握OS设计与实现原理、算法与数据结构
  - 学会基于(英文)文献的研究型学习/研究方法 
* Recommended Readings
  - 《Operating System Internals and Design principles》
  - 《 Applied Operating System Concepts》
* 关于学时
  - 64个学时

## 1. Operating System Overview

### 1.1 OS Overview

![1611232677292](C:\Users\Dongbixi\AppData\Roaming\Typora\typora-user-images\1611232677292.png)

### 1.2 Abstract

- 关于现代操作系统的四种基本观点（What's OS）
- 现代操作系统功能和非功能性需求（按软件工程的观点分析OS的结构）
- 操作系统的发展、类型及特征
- 现代操作系统体系结构基础知识

### 1.3 Learning Objectives

By the end of this chapter you should be able to：

- Explain what's OS
- Analyze the functional and non functional requirements of OS 
  - 分析OS的功能性与非功能性需求
- Technical Terms: 
  - Simple Batch Systems & BatchMultiprogramming
    - 简单批处理系统（单道批处理系统）
      - 单道（一个进程或一个线程）
      - 批处理（有一批作业在外存等待处理，进入内存后只能 one by one 的处理）
    - 多道批处理系统
  - Uniprogramming & Multiprogramming
    - 单道程序设计技术（一个系统只允许一个进程）
    - 多道程序设计技术
  - Time Sharing
    - 分时系统（一个进程运行一段时间切换另一个进程）
- 2 Different Concepts
  - Concurrency & Parallelism
    - 并发
    - 并行
- General Architecture of OS
  - 操作系统一般体系结构
- Modes of Execution
  - Single-Mode
  - Multi-mode
  - Dual-Mode
- Microkernels
  - 微核结构



### 1.4 What's OS

#### OS 结构图

![1611292727290](C:\Users\Dongbixi\AppData\Roaming\Typora\typora-user-images\1611292727290.png)

#### 关于现代OS的四种基本观点

- User/Computer Interface：该观点认为OS是计算机用户使用计算机
  系统的接口，它为计算机用户提供了方便的工作环境。
- Virtual Machine：该观点认为OS是建立在计算机硬件平台上的虚拟机，它为应用软件提供了许多比计算机硬件功能更强或没有的功能。

- Resource Manager：该观点认为OS是计算机系统中各类资源的管理
  者，它负责分配、回收以及控制系统中的各种软硬件资源。
- Job Organizer：该观点认为OS是计算机系统工作流程的组织者，它负责协调在系统中运行的各个应用软件的运行程序。

### 1.5 OS 的系统需求 

软件系统的系统需求，所谓软件系统的系统需是指，人们从软件系统的外部对软件系统提出的诸多期望。

功能性需求：

- 软件系统能提供的服务

非功能性需求：

- 软件系统在提供这些服务时，需要满足的限制条件
- 软件系统具有适应某些变化的能力

#### OS 的功能性需求

- 计算机用户需要的 `User Interface`（用户命令）
  - 由OS实现的所有用户命令所构成的集合常被人们称为OS的 Interface（用户接口），也称为命令接口。
- 应用软件需要的 `System Call`（系统调用）
  - 由OS实现的所有系统调用所构成的集合被人们称为程序接口或应用编程接口（Application Programming Interface, API）。

##### User Interface

- 用户命令：指计算机用户要求计算机系统为其工作的指示。
- 命令的表示形式
  - 字符形式
  - 菜单形式
  - 图形形式
- 命令的使用方式
  - 脱机使用方式（off-line）
  - 联机使用方式（on-line）

注意：脱机和联机的区别是否在系统的控制下执行

##### System Call

- System Call：指由OS实现的应用软件在运行过程中可以引用的System Service。
- 当前两种常用的API
  - POSIX.1：Linux
  - WIN32API ：Windows

注意：程序接口事实上定义了一台虚拟计算机。该虚拟计算机包含一组抽象概念以及与这组抽象概念相关的系统服务。

#### OS 的非功能性需求

- Performance (性能) or Efficiency (效率)
  - maximize throughput
  - minimize response time
  - in the case of time sharing
  - accommodate as many users as possible
- Fairness(公平性)
  - give equal and fair access to all processes
- Reliability(可靠性)
- Security(安全性)
- Scalability(可伸缩性)
- Extensibility(可扩展性)
- Portability(可移植性)

#### OS 对硬件平台的依赖 

- Timer     计时器
- I/O Interrupts       IO中断
- DMA or Channel       直接存储/存取
- Privileged Instructions         硬件支撑的特权指令
- Memory Protection Mechanism       存储保护机制

MMU解释：Memory Manager Unit  

存储管理单元是用来做地址转换的，每条指令（代码）都必须要把虚拟地址转换为内存中的实际地址，而且硬件必须支持此功能。

### 1.6 基本概念

#### Job（作业）

- Job 是指计算机用户在一次上机过程中要求计算机系统为其所做工作的集合，作业中的每项相对独立的工作称为作业步。
- 通常，人们用一组命令来描述作业，其中每个命令定义一个作业步。
- 作业的基本类型
  - Off-line Job：计算机用户不能在此类作业被计算机系统处理时改变已定义好的作业步。
  - On-line Job：计算机用户可以在此类作业被计算机系统处理时随时改变其作业步。

#### Job Control language (JCL)

- Specialtype of programminglanguage
- Provides instruction to the monitor（监控程序）
  - what compiler to use
  - what data to use

#### Thread & Process

- Thread：是指程序的一次相对独立的运行过程。在现代OS中，线程是系统调度的最小单位。
- Process：是指系统分配资源的基本对象。在现代OS中，进程仅仅是系统中拥有资源的最小实体。不过在传统OS中，进程同时也是系统调度的最小单位。

#### Virtual Memory & File

- Virtual Memory：简单地说，就是进程的逻辑地址空间。它是现代OS对计算机系统中多级物理存储体系进行高度抽象的结果。
- File：简单地说，就是命名了的字节流。它是现代OS对计算机系统中种类繁多的外部设备进行高度抽象的结果。

虚拟内存：就是说把外存的一部分空间虚拟为内存使用。

### 1.7 OS 的演变、类型及特征 

#### Ease of Evolution of an Operating System

- Fixes
- New Services
- Hardware Upgrade Plus New Types of Hardware
- Efficieney

#### Serial Processing(串行处理)

- No operating system

- Machines run from a console with display lights and toggle switches, input device, and printer

  Two main problems:

  - Scheduling: waste processing time
  - Setup time: Setup included loading the compiler, source program, saving compiled program, and loading and linking

#### Simple Batch Systems(简单批处理系统)

![1611301846878](C:\Users\Dongbixi\AppData\Roaming\Typora\typora-user-images\1611301846878.png)

- Monitors(监督程序): Software that controls the running programs
  - Resident monitor is in main memory and available for execution

- Batch jobs together
- Program branches back to monitor when finished

#### Uniprogramming(单道程序设计)

- Processor(处理器) must wait for I/O instruction to complete before proceeding(推进)
- Be inefficient

#### Multiprogramming(多道程序设计)

一个支持Multiprogramming的系统允许多道程序同时准备运行。当正在运行的那道程序因为某种原因（比如等待输入或输出数据）暂时不能继续运行时，系统将自动地启动另一道程序运行。一旦原因消除（比如数据已经到达或数据已经输出完毕），暂时停止运行的那道程序在将来某个时候还可以被系统重新启动继续运行。



cpu有多个核心（模拟出来），本质上还是只有一个CPU在执行

cpu主要负责计算 

多道系统

分时系统：按时间切片来（每个10秒），时间一到就切换下一个任务（切换时会发生中断），中断也会消耗性能，不能一直中断

资源共享：磁盘读写，如果一个磁盘只有一个磁头，那么只能并发读写，如果一个磁盘有多个磁头（每个磁道有一个磁头），那么就可以实现并行读写

```










```



## 2. Processes and Scheduling

## 3. Memory Management

## 4. Device Management

## 5. File Management

```

```

